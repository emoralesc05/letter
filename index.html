<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Carta</title>

<style>

body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:
    radial-gradient(circle at center, rgba(255,230,170,0.6) 0%, rgba(220,190,120,0.8) 60%, #c8a96b 100%);
  font-family: "Georgia", serif;
}

/* Carta */
#container{
  perspective:1000px;
}

#carta{
  width:600px;
  padding:40px;
  background: #f8f1d4;
  background-image:
    linear-gradient(rgba(0,0,0,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,0,0,0.03) 1px, transparent 1px);
  background-size: 4px 4px;
  box-shadow:0 20px 50px rgba(0,0,0,0.4);
  border-radius:6px;
  transition: transform 0.4s ease, box-shadow 0.4s ease;
  cursor:pointer;

  /* üëá esto es lo importante */
  max-height: 0;
  overflow: hidden;
}

/* Halo */
#carta::before{
  content:"";
  position:absolute;
  width:650px;
  height:650px;
  background: radial-gradient(circle, rgba(255,230,150,0.4) 0%, transparent 70%);
  z-index:-1;
  transform: translate(-25px,-25px);
}

#texto{
  font-size:18px;
  line-height:1.6;
  color:#3e2f1c;
  white-space:pre-wrap;
}
#carta.abierta{
  max-height: 80vh;
  overflow-y: auto;
  transition: max-height 1s ease;
}

</style>
</head>
<body>

<div id="container">
  <div id="carta" onclick="abrirCarta()">
    <div id="texto"></div>
  </div>
</div>

<!-- üéµ M√∫sica -->
<audio id="musica" loop>
  <source src="mi-cancion.mp3" type="audio/mpeg">
</audio>

<script>

const mensaje = `Hay palabras que nunca supe c√≥mo decir en voz alta.
Pero el silencio tambi√©n pesa,
y el papel siempre ha sabido sostener lo que el coraz√≥n tiembla al pronunciar.

Desde hace tiempo he querido escribir esto.
No como una confesi√≥n impulsiva,
sino como una verdad que fue creciendo despacio,
como las cosas importantes.

Si esta carta parece larga,
es porque lo que siento no cabe en pocas l√≠neas.
Tal vez no nac√≠ para amar, pero dar√≠a todo por seguir am√°ndote.
Querida Maria Paz, ya han pasado casi 20 d√≠as desde que dejamos de hablar.
No quiero vivir en un tal vez, simplemente no quiero vivir en esa realidad, en un constante arrepentimiento de pensar en qu√© pasar√≠a. Eso me est√° matando, seguir pensando en qu√© hubiera pasado si realmente hac√≠a tal cosa. Creo que muy bien sabes que tuve y tengo 9 rosas, unos chocolates, un tiramis√∫ y algo que creo que pocos sab√≠an 3 cartas.
	Realmente desconozco si vas a ver esta carta, que la tomes en cuenta, quiero decirte que creo que ya pas√≥ suficiente tiempo, ya no quiero, nunca lo quise eso del tiempo y el espacio, voy a calcular la velocidad o qu√© JAJAJAJ. Como ya denotaste no es algo tan serio o formal como usualmente son mis cartas, pero es que te extra√±o demasiado, tal vez lo reprimo demasiado pero es que cuando llega a mi memoria duele demasiado y solo me reprimo. Te puedo decir abiertamente que te sigo amando, no puedo dejar de pensar en ti, no puedo dejar de extra√±arte y no puedo dejar de pensar en que a√∫n tenemos una oportunidad. Por favor, de verdad te lo pido con todo lo que tengo, al menos hablemos sip.

Creo que ya sabes lo mucho que significas en mi vida, lo demasiado que significas en todo lo que soy. Maria Paz yo te amo, de verdad lo hago no es un capricho ni monoton√≠a. Es que t√∫ y nadie m√°s que t√∫ eres el amor de mi vida, eres lo que quiero en mi futuro, eres mi persona favorita, eres y sigues siendo mi todo. Yo te amo y pienso seguir haci√©ndolo hasta d√≥nde t√∫ me lo permitas.

Finalmente, solo me queda decir que me des una oportunidad, te lo pido sip. Por √∫ltimo puede que suene algo complicado y con el poco tiempo sobrante, si a√∫n deseas ser mi san valent√≠n ?

Atte. Erick Morales
Aquel que te ama y tanto te extra√±a.
(Dale una oportunidad sip? )

`;

let i = 0;

function escribir(){
  if(i < mensaje.length){
    document.getElementById("texto").innerHTML += mensaje.charAt(i);
    i++;
    setTimeout(escribir, 25);
  }
}

function abrirCarta(){

  const carta = document.getElementById("carta");
  const musica = document.getElementById("musica");

  if(carta.classList.contains("abierta")) return;

  carta.classList.add("abierta");

  escribir();

  /* üéµ Fade-in elegante */
  musica.volume = 0;
  musica.play();

  let fade = setInterval(()=>{
    if(musica.volume < 0.4){
      musica.volume += 0.02;
    } else {
      clearInterval(fade);
    }
  },200);
}

</script>

</body>
</html>
